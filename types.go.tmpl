{{define "types"}}
{{- $type := .TypeDict -}}

{{- if .Messages -}}
//
// Types
//
{{ range .Messages -}}

{{- if isEnum .Type }}
{{template "enum" .}}
{{ end -}}

{{- if isStruct .Type	}}
{{template "struct" dict "Struct" . "TypeDict" $type}}
{{ end -}}

{{- end -}}
{{- end -}}

{{- if .Services -}}
{{range .Services}}
type {{.Name}} interface {
	{{- range $_, $method := .Methods}}
	{{.Name}}(ctx context.Context{{range $_, $input := .Inputs}}, {{$input.Name}} {{template "type" dict "Type" $input.Type "TypeDict" $type}}{{end}}) {{if len .Outputs}}({{end}}{{range $i, $output := .Outputs}}{{template "type" dict "Type" $output.Type "TypeDict" $type}}{{if lt $i (len $method.Outputs)}}, {{end}}{{end}}error{{if len .Outputs}}){{end}}
	{{- end}}
}
{{end}}
var WebRPCServices = map[string][]string{
{{- range .Services}}
	"{{.Name}}": {
		{{- range .Methods}}
		"{{.Name}}",
		{{- end}}
	},
{{- end}}
}
{{- end -}}

{{- end -}}
